{"ast":null,"code":"var _jsxFileName = \"/Users/pineros/Downloads/gestion-pastoral-react/src/ProtectedRoute.jsx\",\n  _s = $RefreshSig$();\n// üõ°Ô∏è ProtectedRoute - Valida permisos antes de mostrar componentes\nimport React from 'react';\nimport { Navigate } from 'react-router-dom';\nimport { useAuth } from './AuthContext';\n\n/**\n * @param {JSX.Element} element - Componente a renderizar\n * @param {string|string[]} requiredRoles - Rol o roles necesarios\n * @param {boolean} requireAll - Si true, necesita TODOS los roles; si false, necesita AL MENOS uno\n */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const ProtectedRoute = ({\n  element,\n  requiredRoles = null,\n  requireAll = false\n}) => {\n  _s();\n  const {\n    isAuthenticated,\n    hasRole,\n    hasAnyRole,\n    loading\n  } = useAuth();\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center h-screen\",\n      children: \"Cargando...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 19,\n      columnNumber: 12\n    }, this);\n  }\n\n  // Si no est√° autenticado, redirigir a login\n  if (!isAuthenticated()) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/login\",\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 12\n    }, this);\n  }\n\n  // Si se especifican roles requeridos, validar\n  if (requiredRoles) {\n    const rolesArray = Array.isArray(requiredRoles) ? requiredRoles : [requiredRoles];\n    const hasPermission = requireAll ? rolesArray.every(role => hasRole(role)) : hasAnyRole(rolesArray);\n    if (!hasPermission) {\n      return /*#__PURE__*/_jsxDEV(Navigate, {\n        to: \"/unauthorized\",\n        replace: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 14\n      }, this);\n    }\n  }\n  return element;\n};\n\n// P√°gina de acceso denegado\n_s(ProtectedRoute, \"ptZhDzXb9MJSuTJ6Pz+JPoqXuTo=\", false, function () {\n  return [useAuth];\n});\n_c = ProtectedRoute;\nexport const UnauthorizedPage = () => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"flex flex-col items-center justify-center h-screen bg-gray-100\",\n  children: /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"text-center\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-4xl font-bold text-red-600 mb-4\",\n      children: \"403\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-2xl font-semibold text-gray-700 mb-4\",\n      children: \"Acceso Denegado\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-gray-600 mb-8\",\n      children: \"No tienes permisos para acceder a esta p\\xE1gina.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n      href: \"/dashboard\",\n      className: \"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\",\n      children: \"Volver al Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 45,\n  columnNumber: 3\n}, this);\n_c2 = UnauthorizedPage;\nvar _c, _c2;\n$RefreshReg$(_c, \"ProtectedRoute\");\n$RefreshReg$(_c2, \"UnauthorizedPage\");","map":{"version":3,"names":["React","Navigate","useAuth","jsxDEV","_jsxDEV","ProtectedRoute","element","requiredRoles","requireAll","_s","isAuthenticated","hasRole","hasAnyRole","loading","className","children","fileName","_jsxFileName","lineNumber","columnNumber","to","replace","rolesArray","Array","isArray","hasPermission","every","role","_c","UnauthorizedPage","href","_c2","$RefreshReg$"],"sources":["/Users/pineros/Downloads/gestion-pastoral-react/src/ProtectedRoute.jsx"],"sourcesContent":["// üõ°Ô∏è ProtectedRoute - Valida permisos antes de mostrar componentes\nimport React from 'react';\nimport { Navigate } from 'react-router-dom';\nimport { useAuth } from './AuthContext';\n\n/**\n * @param {JSX.Element} element - Componente a renderizar\n * @param {string|string[]} requiredRoles - Rol o roles necesarios\n * @param {boolean} requireAll - Si true, necesita TODOS los roles; si false, necesita AL MENOS uno\n */\nexport const ProtectedRoute = ({\n  element,\n  requiredRoles = null,\n  requireAll = false,\n}) => {\n  const { isAuthenticated, hasRole, hasAnyRole, loading } = useAuth();\n\n  if (loading) {\n    return <div className=\"flex items-center justify-center h-screen\">Cargando...</div>;\n  }\n\n  // Si no est√° autenticado, redirigir a login\n  if (!isAuthenticated()) {\n    return <Navigate to=\"/login\" replace />;\n  }\n\n  // Si se especifican roles requeridos, validar\n  if (requiredRoles) {\n    const rolesArray = Array.isArray(requiredRoles) ? requiredRoles : [requiredRoles];\n\n    const hasPermission = requireAll\n      ? rolesArray.every(role => hasRole(role))\n      : hasAnyRole(rolesArray);\n\n    if (!hasPermission) {\n      return <Navigate to=\"/unauthorized\" replace />;\n    }\n  }\n\n  return element;\n};\n\n// P√°gina de acceso denegado\nexport const UnauthorizedPage = () => (\n  <div className=\"flex flex-col items-center justify-center h-screen bg-gray-100\">\n    <div className=\"text-center\">\n      <h1 className=\"text-4xl font-bold text-red-600 mb-4\">403</h1>\n      <p className=\"text-2xl font-semibold text-gray-700 mb-4\">Acceso Denegado</p>\n      <p className=\"text-gray-600 mb-8\">\n        No tienes permisos para acceder a esta p√°gina.\n      </p>\n      <a\n        href=\"/dashboard\"\n        className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\"\n      >\n        Volver al Dashboard\n      </a>\n    </div>\n  </div>\n);\n"],"mappings":";;AAAA;AACA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,QAAQ,QAAQ,kBAAkB;AAC3C,SAASC,OAAO,QAAQ,eAAe;;AAEvC;AACA;AACA;AACA;AACA;AAJA,SAAAC,MAAA,IAAAC,OAAA;AAKA,OAAO,MAAMC,cAAc,GAAGA,CAAC;EAC7BC,OAAO;EACPC,aAAa,GAAG,IAAI;EACpBC,UAAU,GAAG;AACf,CAAC,KAAK;EAAAC,EAAA;EACJ,MAAM;IAAEC,eAAe;IAAEC,OAAO;IAAEC,UAAU;IAAEC;EAAQ,CAAC,GAAGX,OAAO,CAAC,CAAC;EAEnE,IAAIW,OAAO,EAAE;IACX,oBAAOT,OAAA;MAAKU,SAAS,EAAC,2CAA2C;MAAAC,QAAA,EAAC;IAAW;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC;EACrF;;EAEA;EACA,IAAI,CAACT,eAAe,CAAC,CAAC,EAAE;IACtB,oBAAON,OAAA,CAACH,QAAQ;MAACmB,EAAE,EAAC,QAAQ;MAACC,OAAO;IAAA;MAAAL,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EACzC;;EAEA;EACA,IAAIZ,aAAa,EAAE;IACjB,MAAMe,UAAU,GAAGC,KAAK,CAACC,OAAO,CAACjB,aAAa,CAAC,GAAGA,aAAa,GAAG,CAACA,aAAa,CAAC;IAEjF,MAAMkB,aAAa,GAAGjB,UAAU,GAC5Bc,UAAU,CAACI,KAAK,CAACC,IAAI,IAAIhB,OAAO,CAACgB,IAAI,CAAC,CAAC,GACvCf,UAAU,CAACU,UAAU,CAAC;IAE1B,IAAI,CAACG,aAAa,EAAE;MAClB,oBAAOrB,OAAA,CAACH,QAAQ;QAACmB,EAAE,EAAC,eAAe;QAACC,OAAO;MAAA;QAAAL,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IAChD;EACF;EAEA,OAAOb,OAAO;AAChB,CAAC;;AAED;AAAAG,EAAA,CAhCaJ,cAAc;EAAA,QAKiCH,OAAO;AAAA;AAAA0B,EAAA,GALtDvB,cAAc;AAiC3B,OAAO,MAAMwB,gBAAgB,GAAGA,CAAA,kBAC9BzB,OAAA;EAAKU,SAAS,EAAC,gEAAgE;EAAAC,QAAA,eAC7EX,OAAA;IAAKU,SAAS,EAAC,aAAa;IAAAC,QAAA,gBAC1BX,OAAA;MAAIU,SAAS,EAAC,sCAAsC;MAAAC,QAAA,EAAC;IAAG;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eAC7Df,OAAA;MAAGU,SAAS,EAAC,2CAA2C;MAAAC,QAAA,EAAC;IAAe;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAAC,eAC5Ef,OAAA;MAAGU,SAAS,EAAC,oBAAoB;MAAAC,QAAA,EAAC;IAElC;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAAC,eACJf,OAAA;MACE0B,IAAI,EAAC,YAAY;MACjBhB,SAAS,EAAC,+DAA+D;MAAAC,QAAA,EAC1E;IAED;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACD;AAAC;EAAAH,QAAA,EAAAC,YAAA;EAAAC,UAAA;EAAAC,YAAA;AAAA,OACH,CACN;AAACY,GAAA,GAhBWF,gBAAgB;AAAA,IAAAD,EAAA,EAAAG,GAAA;AAAAC,YAAA,CAAAJ,EAAA;AAAAI,YAAA,CAAAD,GAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}